<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACLP - Teste Verifica√ß√£o de Email</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .loading { animation: spin 1s linear infinite; }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .success { background-color: #10b981; color: white; }
        .error { background-color: #ef4444; color: white; }
        .warning { background-color: #f59e0b; color: white; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-blue-600 text-white shadow-md">
        <div class="container mx-auto px-4 py-4">
            <h1 class="text-2xl font-bold">ACLP - Teste de Verifica√ß√£o por Email</h1>
            <p class="text-blue-100">Sistema de verifica√ß√£o antes do cadastro de usu√°rios</p>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Status da API -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                üîó Status da API
                <button id="testConnection" class="ml-4 bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
                    Testar Conex√£o
                </button>
            </h2>
            <div id="apiStatus" class="p-3 rounded bg-gray-100">
                <span class="text-gray-600">Clique em "Testar Conex√£o" para verificar se a API est√° funcionando</span>
            </div>
        </div>

        <!-- Etapa 1: Solicitar C√≥digo -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                üìß Etapa 1: Solicitar C√≥digo de Verifica√ß√£o
            </h2>

            <form id="solicitarCodigoForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                        <input type="email" id="emailSolicitar" required 
                               class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                               placeholder="usuario@exemplo.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Usu√°rio *</label>
                        <select id="tipoUsuario" required 
                                class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="USUARIO">Usu√°rio</option>
                            <option value="ADMIN">Administrador (requer @tjba.jus.br)</option>
                        </select>
                    </div>
                </div>

                <div class="bg-blue-50 p-4 rounded-md">
                    <h3 class="font-medium text-blue-900 mb-2">üí° Dicas para teste:</h3>
                    <ul class="text-sm text-blue-800 space-y-1">
                        <li>‚Ä¢ <strong>USUARIO:</strong> Qualquer email v√°lido</li>
                        <li>‚Ä¢ <strong>ADMIN:</strong> Deve terminar com @tjba.jus.br</li>
                        <li>‚Ä¢ O c√≥digo tem validade de 10 minutos</li>
                        <li>‚Ä¢ M√°ximo 5 tentativas de verifica√ß√£o</li>
                    </ul>
                </div>

                <button type="submit" id="solicitarBtn" 
                        class="w-full bg-blue-600 text-white py-3 px-6 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 font-medium">
                    <span id="solicitarText">üì® Solicitar C√≥digo</span>
                    <span id="solicitarLoading" class="hidden">
                        <svg class="loading inline w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        Enviando...
                    </span>
                </button>
            </form>

            <div id="resultadoSolicitar" class="hidden mt-4 p-4 rounded-md"></div>
        </div>

        <!-- Etapa 2: Verificar C√≥digo -->
        <div id="etapaVerificar" class="bg-white rounded-lg shadow-md p-6 mb-6 opacity-50">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                üîë Etapa 2: Verificar C√≥digo
            </h2>

            <form id="verificarCodigoForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                        <input type="email" id="emailVerificar" required 
                               class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500"
                               placeholder="Mesmo email da etapa 1">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">C√≥digo de 6 D√≠gitos *</label>
                        <input type="text" id="codigoVerificar" required maxlength="6" pattern="[0-9]{6}"
                               class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 text-center text-xl font-mono"
                               placeholder="123456">
                    </div>
                </div>

                <div class="bg-yellow-50 p-4 rounded-md">
                    <h3 class="font-medium text-yellow-900 mb-2">‚ö†Ô∏è Verifica√ß√£o de C√≥digo:</h3>
                    <ul class="text-sm text-yellow-800 space-y-1">
                        <li>‚Ä¢ Digite o c√≥digo de 6 d√≠gitos recebido no email</li>
                        <li>‚Ä¢ O c√≥digo expira em 10 minutos</li>
                        <li>‚Ä¢ Voc√™ tem 5 tentativas para acertar</li>
                        <li>‚Ä¢ Se errar 5 vezes, solicite um novo c√≥digo</li>
                    </ul>
                </div>

                <button type="submit" id="verificarBtn" disabled
                        class="w-full bg-green-600 text-white py-3 px-6 rounded-md hover:bg-green-700 focus:ring-2 focus:ring-green-500 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed">
                    <span id="verificarText">‚úÖ Verificar C√≥digo</span>
                    <span id="verificarLoading" class="hidden">
                        <svg class="loading inline w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        Verificando...
                    </span>
                </button>
            </form>

            <div id="resultadoVerificar" class="hidden mt-4 p-4 rounded-md"></div>
        </div>

        <!-- Etapa 3: Criar Usu√°rio -->
        <div id="etapaCriarUsuario" class="bg-white rounded-lg shadow-md p-6 mb-6 opacity-50">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                üë§ Etapa 3: Criar Usu√°rio
            </h2>

            <form id="criarUsuarioForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nome Completo *</label>
                        <input type="text" id="nomeUsuario" required 
                               class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                               placeholder="Jo√£o Silva Santos">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                        <input type="email" id="emailUsuario" required readonly
                               class="w-full p-3 border border-gray-300 rounded-md bg-gray-100"
                               placeholder="Ser√° preenchido automaticamente">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Senha *</label>
                        <input type="password" id="senhaUsuario" required 
                               class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                               placeholder="Senha forte">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo *</label>
                        <select id="tipoUsuarioFinal" required readonly
                                class="w-full p-3 border border-gray-300 rounded-md bg-gray-100">
                            <option value="USUARIO">Usu√°rio</option>
                            <option value="ADMIN">Administrador</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Departamento</label>
                        <input type="text" id="departamentoUsuario" 
                               class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                               placeholder="TI, Administra√ß√£o, etc.">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                        <input type="tel" id="telefoneUsuario" 
                               class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                               placeholder="(71) 99999-9999">
                    </div>
                </div>

                <input type="hidden" id="tokenVerificacao" value="">

                <button type="submit" id="criarUsuarioBtn" disabled
                        class="w-full bg-purple-600 text-white py-3 px-6 rounded-md hover:bg-purple-700 focus:ring-2 focus:ring-purple-500 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed">
                    <span id="criarUsuarioText">üë§ Criar Usu√°rio</span>
                    <span id="criarUsuarioLoading" class="hidden">
                        <svg class="loading inline w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                        </svg>
                        Criando...
                    </span>
                </button>
            </form>

            <div id="resultadoCriarUsuario" class="hidden mt-4 p-4 rounded-md"></div>
        </div>

        <!-- Utilit√°rios -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                üõ†Ô∏è Utilit√°rios
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button id="consultarStatus" 
                        class="bg-gray-500 text-white py-2 px-4 rounded hover:bg-gray-600">
                    üìä Consultar Status
                </button>
                <button id="reenviarCodigo" 
                        class="bg-orange-500 text-white py-2 px-4 rounded hover:bg-orange-600">
                    üì® Reenviar C√≥digo
                </button>
                <button id="limparTudo" 
                        class="bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600">
                    üóëÔ∏è Limpar Tudo
                </button>
            </div>

            <div id="resultadoUtilitarios" class="hidden mt-4 p-4 rounded-md"></div>
        </div>

        <!-- Log de A√ß√µes -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center">
                üìù Log de A√ß√µes
            </h2>
            <div id="logAcoes" class="bg-gray-50 p-4 rounded-md h-64 overflow-y-auto font-mono text-sm">
                <div class="text-gray-500">Log de a√ß√µes aparecer√° aqui...</div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8080/api';
        let currentEmail = '';
        let currentTipoUsuario = '';

        // Fun√ß√£o para adicionar ao log
        function addLog(message, type = 'info') {
            const logEl = document.getElementById('logAcoes');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: 'text-blue-600',
                success: 'text-green-600',
                error: 'text-red-600',
                warning: 'text-yellow-600'
            };
            
            logEl.innerHTML += `<div class="${colors[type]}">[${timestamp}] ${message}</div>`;
            logEl.scrollTop = logEl.scrollHeight;
        }

        // Fun√ß√£o para mostrar resultado
        function showResult(elementId, message, isSuccess = true) {
            const el = document.getElementById(elementId);
            el.innerHTML = message;
            el.className = `mt-4 p-4 rounded-md ${isSuccess ? 'success' : 'error'}`;
            el.classList.remove('hidden');
        }

        // Testar conex√£o
        document.getElementById('testConnection').addEventListener('click', async () => {
            const statusEl = document.getElementById('apiStatus');
            statusEl.innerHTML = '<span class="text-blue-600">üîÑ Testando conex√£o...</span>';
            
            try {
                const response = await fetch(`${API_BASE}/verificacao/health`);
                const data = await response.json();
                
                if (response.ok) {
                    statusEl.innerHTML = '<span class="text-green-600">‚úÖ API de verifica√ß√£o funcionando!</span>';
                    statusEl.className = 'p-3 rounded bg-green-50';
                    addLog('API de verifica√ß√£o conectada com sucesso', 'success');
                } else {
                    throw new Error('API retornou erro');
                }
            } catch (error) {
                statusEl.innerHTML = '<span class="text-red-600">‚ùå Erro de conex√£o com API de verifica√ß√£o</span>';
                statusEl.className = 'p-3 rounded bg-red-50';
                addLog('Erro de conex√£o: ' + error.message, 'error');
            }
        });

        // Etapa 1: Solicitar c√≥digo
        document.getElementById('solicitarCodigoForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('emailSolicitar').value;
            const tipo = document.getElementById('tipoUsuario').value;
            
            // Valida√ß√£o ADMIN
            if (tipo === 'ADMIN' && !email.endsWith('@tjba.jus.br')) {
                showResult('resultadoSolicitar', '‚ùå Administradores devem usar email @tjba.jus.br', false);
                addLog(`Tentativa de criar ADMIN com email n√£o institucional: ${email}`, 'warning');
                return;
            }

            // Mostrar loading
            toggleLoading('solicitar', true);
            
            try {
                const response = await fetch(`${API_BASE}/verificacao/solicitar-codigo`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        email: email,
                        tipoUsuario: tipo
                    })
                });

                const result = await response.json();
                
                if (response.ok && result.status === 'success') {
                    showResult('resultadoSolicitar', 
                        `‚úÖ <strong>C√≥digo enviado com sucesso!</strong><br>
                         üìß Email: ${result.email}<br>
                         ‚è∞ V√°lido por: ${result.validadePorMinutos} minutos<br>
                         üîÅ Tentativas permitidas: ${result.tentativasPermitidas}`, true);
                    
                    // Habilitar pr√≥xima etapa
                    habilitarEtapa('verificar', email, tipo);
                    addLog(`C√≥digo enviado para ${result.email}`, 'success');
                } else {
                    showResult('resultadoSolicitar', 
                        `‚ùå <strong>Erro:</strong> ${result.message}<br><pre>${JSON.stringify(result, null, 2)}</pre>`, false);
                    addLog(`Erro ao solicitar c√≥digo: ${result.message}`, 'error');
                }
            } catch (error) {
                showResult('resultadoSolicitar', `‚ùå <strong>Erro de conex√£o:</strong> ${error.message}`, false);
                addLog(`Erro de conex√£o: ${error.message}`, 'error');
            } finally {
                toggleLoading('solicitar', false);
            }
        });

        // Etapa 2: Verificar c√≥digo
        document.getElementById('verificarCodigoForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('emailVerificar').value;
            const codigo = document.getElementById('codigoVerificar').value;
            
            if (codigo.length !== 6 || !/^\d{6}$/.test(codigo)) {
                showResult('resultadoVerificar', '‚ùå C√≥digo deve ter exatamente 6 d√≠gitos', false);
                return;
            }

            toggleLoading('verificar', true);
            
            try {
                const response = await fetch(`${API_BASE}/verificacao/verificar-codigo`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        email: email,
                        codigo: codigo
                    })
                });

                const result = await response.json();
                
                if (response.ok && result.verificado) {
                    showResult('resultadoVerificar', 
                        `‚úÖ <strong>C√≥digo verificado com sucesso!</strong><br>
                         üéüÔ∏è Token gerado para cria√ß√£o do usu√°rio<br>
                         ‚è∞ V√°lido at√©: ${result.validoAte}`, true);
                    
                    // Habilitar pr√≥xima etapa
                    habilitarEtapaCriarUsuario(email, currentTipoUsuario, result.tokenVerificacao);
                    addLog(`C√≥digo verificado com sucesso para ${email}`, 'success');
                } else {
                    showResult('resultadoVerificar', 
                        `‚ùå <strong>Erro:</strong> ${result.message}<br>
                         ${result.tentativasRestantes ? `Tentativas restantes: ${result.tentativasRestantes}` : ''}`, false);
                    addLog(`Erro na verifica√ß√£o: ${result.message}`, 'error');
                }
            } catch (error) {
                showResult('resultadoVerificar', `‚ùå <strong>Erro de conex√£o:</strong> ${error.message}`, false);
                addLog(`Erro de conex√£o: ${error.message}`, 'error');
            } finally {
                toggleLoading('verificar', false);
            }
        });

        // Etapa 3: Criar usu√°rio
        document.getElementById('criarUsuarioForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const userData = {
                nome: document.getElementById('nomeUsuario').value,
                email: document.getElementById('emailUsuario').value,
                senha: document.getElementById('senhaUsuario').value,
                tipo: document.getElementById('tipoUsuarioFinal').value,
                departamento: document.getElementById('departamentoUsuario').value || null,
                telefone: document.getElementById('telefoneUsuario').value || null
            };

            toggleLoading('criarUsuario', true);
            
            try {
                const response = await fetch(`${API_BASE}/usuarios`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(userData)
                });

                const result = await response.json();
                
                if (response.ok) {
                    showResult('resultadoCriarUsuario', 
                        `‚úÖ <strong>Usu√°rio criado com sucesso!</strong><br>
                         üë§ Nome: ${result.nome}<br>
                         üìß Email: ${result.email}<br>
                         üè∑Ô∏è Tipo: ${result.tipo}<br>
                         üìÖ Criado em: ${new Date(result.criadoEm).toLocaleString()}`, true);
                    
                    addLog(`Usu√°rio criado: ${result.nome} (${result.email})`, 'success');
                    
                    // Limpar formul√°rio
                    document.getElementById('criarUsuarioForm').reset();
                    desabilitarTodasEtapas();
                } else {
                    showResult('resultadoCriarUsuario', 
                        `‚ùå <strong>Erro ao criar usu√°rio:</strong><br><pre>${JSON.stringify(result, null, 2)}</pre>`, false);
                    addLog(`Erro ao criar usu√°rio: ${result.message || 'Erro desconhecido'}`, 'error');
                }
            } catch (error) {
                showResult('resultadoCriarUsuario', `‚ùå <strong>Erro de conex√£o:</strong> ${error.message}`, false);
                addLog(`Erro de conex√£o: ${error.message}`, 'error');
            } finally {
                toggleLoading('criarUsuario', false);
            }
        });

        // Fun√ß√µes utilit√°rias
        function toggleLoading(action, show) {
            const textEl = document.getElementById(`${action}Text`);
            const loadingEl = document.getElementById(`${action}Loading`);
            const btnEl = document.getElementById(`${action}Btn`);
            
            if (show) {
                textEl.classList.add('hidden');
                loadingEl.classList.remove('hidden');
                btnEl.disabled = true;
            } else {
                textEl.classList.remove('hidden');
                loadingEl.classList.add('hidden');
                btnEl.disabled = false;
            }
        }

        function habilitarEtapa(etapa, email, tipo) {
            currentEmail = email;
            currentTipoUsuario = tipo;
            
            const etapaEl = document.getElementById(`etapa${etapa.charAt(0).toUpperCase() + etapa.slice(1)}`);
            etapaEl.classList.remove('opacity-50');
            
            if (etapa === 'verificar') {
                document.getElementById('emailVerificar').value = email;
                document.getElementById('verificarBtn').disabled = false;
            }
        }

        function habilitarEtapaCriarUsuario(email, tipo, token) {
            const etapaEl = document.getElementById('etapaCriarUsuario');
            etapaEl.classList.remove('opacity-50');
            
            document.getElementById('emailUsuario').value = email;
            document.getElementById('tipoUsuarioFinal').value = tipo;
            document.getElementById('tokenVerificacao').value = token;
            document.getElementById('criarUsuarioBtn').disabled = false;
        }

        function desabilitarTodasEtapas() {
            document.getElementById('etapaVerificar').classList.add('opacity-50');
            document.getElementById('etapaCriarUsuario').classList.add('opacity-50');
            document.getElementById('verificarBtn').disabled = true;
            document.getElementById('criarUsuarioBtn').disabled = true;
        }

        // Utilit√°rios
        document.getElementById('consultarStatus').addEventListener('click', async () => {
            if (!currentEmail) {
                showResult('resultadoUtilitarios', '‚ùå Nenhum email em processo de verifica√ß√£o', false);
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/verificacao/status?email=${encodeURIComponent(currentEmail)}`);
                const result = await response.json();
                
                showResult('resultadoUtilitarios', 
                    `üìä <strong>Status de Verifica√ß√£o:</strong><br><pre>${JSON.stringify(result, null, 2)}</pre>`, true);
                addLog(`Status consultado para ${currentEmail}`, 'info');
            } catch (error) {
                showResult('resultadoUtilitarios', `‚ùå Erro: ${error.message}`, false);
            }
        });

        document.getElementById('reenviarCodigo').addEventListener('click', async () => {
            if (!currentEmail) {
                showResult('resultadoUtilitarios', '‚ùå Nenhum email em processo de verifica√ß√£o', false);
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/verificacao/reenviar-codigo`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({email: currentEmail})
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showResult('resultadoUtilitarios', `‚úÖ C√≥digo reenviado para ${result.email}`, true);
                    addLog(`C√≥digo reenviado para ${currentEmail}`, 'success');
                } else {
                    showResult('resultadoUtilitarios', `‚ùå Erro: ${result.message}`, false);
                }
            } catch (error) {
                showResult('resultadoUtilitarios', `‚ùå Erro: ${error.message}`, false);
            }
        });

        document.getElementById('limparTudo').addEventListener('click', () => {
            // Limpar formul√°rios
            document.getElementById('solicitarCodigoForm').reset();
            document.getElementById('verificarCodigoForm').reset();
            document.getElementById('criarUsuarioForm').reset();
            
            // Esconder resultados
            document.querySelectorAll('[id^="resultado"]').forEach(el => el.classList.add('hidden'));
            
            // Desabilitar etapas
            desabilitarTodasEtapas();
            
            // Limpar vari√°veis
            currentEmail = '';
            currentTipoUsuario = '';
            
            // Limpar log
            document.getElementById('logAcoes').innerHTML = '<div class="text-gray-500">Log de a√ß√µes aparecer√° aqui...</div>';
            
            addLog('Sistema limpo - pronto para novo teste', 'info');
        });

        // Auto-carregar ao inicializar
        window.addEventListener('load', () => {
            document.getElementById('testConnection').click();
            addLog('Sistema de teste iniciado', 'info');
        });
    </script>
</body>
</html>